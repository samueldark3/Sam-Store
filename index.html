<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sam Store - Sua Loja Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body class="bg-gray-100 font-sans">
    <!-- Header -->
    <header class="bg-yellow-400 shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
            <div class="flex items-center justify-between w-full sm:w-auto">
                <a href="#" class="text-2xl font-bold text-gray-800">Sam Store</a>
                <button id="toggleFilters" class="sm:hidden text-gray-800 hover:text-blue-600">
                    <i class="fas fa-filter"></i>
                </button>
            </div>
            <div class="w-full sm:w-1/2">
                <div class="relative">
                    <input type="text" id="searchInput" placeholder="Buscar produtos..." class="w-full p-2 pl-10 rounded-md border border-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500"></i>
                </div>
            </div>
            <div>
                <a href="admin.html" class="text-gray-800 hover:text-blue-600"><i class="fas fa-user-shield"></i> Admin</a>
            </div>
        </div>
        <nav class="bg-gray-800 text-white">
            <div class="container mx-auto px-4 py-2">
                <ul class="flex flex-wrap gap-4 sm:gap-6">
                    <li><a href="#" class="hover:text-yellow-400">Início</a></li>
                    <li><a href="#" class="hover:text-yellow-400">Ofertas</a></li>
                    <li><a href="#" class="hover:text-yellow-400">Categorias</a></li>
                    <li><a href="#" class="hover:text-yellow-400">Ajuda</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6 flex flex-col sm:flex-row gap-6">
        <!-- Sidebar Filters -->
        <aside id="filters" class="w-full sm:w-1/4 pr-0 sm:pr-6 hidden sm:block">
            <div class="bg-white p-4 rounded-lg shadow">
                <h2 class="text-lg font-semibold mb-4">Filtros</h2>
                <div class="mb-6">
                    <h3 class="font-medium mb-2">Categoria</h3>
                    <ul class="space-y-2">
                        <li><label><input type="checkbox" class="categoryFilter" value="Eletrônicos"> Eletrônicos</label></li>
                        <li><label><input type="checkbox" class="categoryFilter" value="Moda"> Moda</label></li>
                        <li><label><input type="checkbox" class="categoryFilter" value="Casa"> Casa</label></li>
                        <li><label><input type="checkbox" class="categoryFilter" value="Esportes"> Esportes</label></li>
                    </ul>
                </div>
                <div class="mb-6">
                    <h3 class="font-medium mb-2">Preço</h3>
                    <div class="flex flex-col sm:flex-row gap-2">
                        <input type="number" id="minPrice" placeholder="Mínimo" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <input type="number" id="maxPrice" placeholder="Máximo" class="w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <button id="applyPriceFilter" class="mt-2 w-full bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Aplicar</button>
                </div>
                <div>
                    <h3 class="font-medium mb-2">Condição</h3>
                    <ul class="space-y-2">
                        <li><label><input type="checkbox" class="conditionFilter" value="Novo"> Novo</label></li>
                        <li><label><input type="checkbox" class="conditionFilter" value="Usado"> Usado</label></li>
                    </ul>
                </div>
            </div>
        </aside>

        <!-- Product Grid -->
        <section class="w-full sm:w-3/4">
            <div class="flex flex-col sm:flex-row justify-between items-center mb-4 gap-3">
                <h2 class="text-xl font-semibold">Produtos em Destaque</h2>
                <select id="sortSelect" class="p-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500 w-full sm:w-auto">
                    <option value="relevance">Relevância</option>
                    <option value="price-asc">Menor Preço</option>
                    <option value="price-desc">Maior Preço</option>
                </select>
            </div>
            <div id="productGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                <!-- Products will be dynamically inserted here -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
                <div>
                    <h3 class="text-lg font-semibold mb-2">Sam Store</h3>
                    <p>Sua loja online de produtos diversos com qualidade e confiança.</p>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-2">Links Úteis</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="hover:text-yellow-400">Política de Privacidade</a></li>
                        <li><a href="#" class="hover:text-yellow-400">Termos de Uso</a></li>
                        <li><a href="#" class="hover:text-yellow-400">Contato</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-2">Siga-nos</h3>
                    <div class="flex space-x-4">
                        <a href="#" class="hover:text-yellow-400"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="hover:text-yellow-400"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="hover:text-yellow-400"><i class="fab fa-whatsapp"></i></a>
                    </div>
                </div>
            </div>
            <div class="text-center mt-6">
                <p>© 2025 Sam Store. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Load products and click counts from localStorage
        let products = JSON.parse(localStorage.getItem('samStoreProducts')) || [
            {
                id: 1,
                title: "Smartphone Samsung Galaxy A15 128GB 4GB RAM Azul",
                price: 999.00,
                discount: 10,
                category: "Eletrônicos",
                condition: "Novo",
                image: "https://http2.mlstatic.com/D_NQ_NP_2X_747743-MLA78902612522_092024-F.webp",
                link: "https://mercadolivre.com/sec/29k1yKb",
                description: "Smartphone Samsung Galaxy A15 com 128GB de armazenamento, 4GB de RAM, tela AMOLED 6.5 polegadas, câmera tripla de 50MP, bateria de 5000mAh.",
                clicks: 0
            },
            {
                id: 2,
                title: "Tênis Esportivo Nike",
                price: 399.99,
                discount: 0,
                category: "Esportes",
                condition: "Novo",
                image: "https://via.placeholder.com/200",
                link: "https://example.com/tenis",
                description: "Tênis confortável para corridas e treinos.",
                clicks: 0
            }
        ];

        let productClicks = JSON.parse(localStorage.getItem('samStoreProductClicks')) || {};

        // Save products and clicks to localStorage
        function saveProducts() {
            localStorage.setItem('samStoreProducts', JSON.stringify(products));
        }

        function saveClicks() {
            localStorage.setItem('samStoreProductClicks', JSON.stringify(productClicks));
        }

        // Render products
        function renderProducts(filteredProducts = products) {
            const productGrid = document.getElementById('productGrid');
            productGrid.innerHTML = '';
            filteredProducts.forEach(product => {
                const finalPrice = product.discount ? (product.price * (1 - product.discount / 100)).toFixed(2) : product.price.toFixed(2);
                const productCard = `
                    <div class="bg-white p-4 rounded-lg shadow hover:shadow-lg transition">
                        <div class="relative w-full aspect-[4/3]">
                            <img src="${product.image}" alt="${product.title}" class="w-full h-full object-contain rounded">
                        </div>
                        <h3 class="text-lg font-semibold mt-4">${product.title}</h3>
                        <p class="text-sm text-gray-600">${product.category} - ${product.condition}</p>
                        ${product.discount ? `<p class="text-sm text-gray-500 line-through">R$ ${product.price.toFixed(2)}</p>` : ''}
                        <p class="text-xl font-bold text-green-600">R$ ${finalPrice}</p>
                        <p class="text-sm text-gray-600 mt-2 line-clamp-3">${product.description}</p>
                        <a href="${product.link}" target="_blank" class="buyButton mt-4 w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 text-center" data-id="${product.id}">Comprar</a>
                    </div>
                `;
                productGrid.innerHTML += productCard;
            });

            // Add click event listeners
            document.querySelectorAll('.buyButton').forEach(btn => {
                btn.addEventListener('click', () => {
                    const productId = parseInt(btn.dataset.id);
                    productClicks[productId] = (productClicks[productId] || 0) + 1;
                    saveClicks();
                });
            });
        }

        // Initial render
        renderProducts();

        // Toggle filters on mobile
        document.getElementById('toggleFilters').addEventListener('click', () => {
            const filters = document.getElementById('filters');
            filters.classList.toggle('hidden');
        });

        // Search functionality
        document.getElementById('searchInput').addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            const filteredProducts = products.filter(product =>
                product.title.toLowerCase().includes(searchTerm) ||
                product.description.toLowerCase().includes(searchTerm)
            );
            renderProducts(filteredProducts);
        });

        // Filter functionality
        function applyFilters() {
            const selectedCategories = Array.from(document.querySelectorAll('.categoryFilter:checked')).map(el => el.value);
            const selectedConditions = Array.from(document.querySelectorAll('.conditionFilter:checked')).map(el => el.value);
            const minPrice = parseFloat(document.getElementById('minPrice').value) || 0;
            const maxPrice = parseFloat(document.getElementById('maxPrice').value) || Infinity;

            const filteredProducts = products.filter(product => {
                const finalPrice = product.discount ? product.price * (1 - product.discount / 100) : product.price;
                return (
                    (selectedCategories.length === 0 || selectedCategories.includes(product.category)) &&
                    (selectedConditions.length === 0 || selectedConditions.includes(product.condition)) &&
                    finalPrice >= minPrice &&
                    finalPrice <= maxPrice
                );
            });
            renderProducts(filteredProducts);
        }

        document.querySelectorAll('.categoryFilter, .conditionFilter').forEach(filter => {
            filter.addEventListener('change', applyFilters);
        });

        document.getElementById('applyPriceFilter').addEventListener('click', applyFilters);

        // Sort functionality
        document.getElementById('sortSelect').addEventListener('change', (e) => {
            const sortValue = e.target.value;
            let sortedProducts = [...products];
            if (sortValue === 'price-asc') {
                sortedProducts.sort((a, b) => {
                    const priceA = a.discount ? a.price * (1 - a.discount / 100) : a.price;
                    const priceB = b.discount ? b.price * (1 - b.discount / 100) : b.price;
                    return priceA - priceB;
                });
            } else if (sortValue === 'price-desc') {
                sortedProducts.sort((a, b) => {
                    const priceA = a.discount ? a.price * (1 - a.discount / 100) : a.price;
                    const priceB = b.discount ? b.price * (1 - b.discount / 100) : b.price;
                    return priceB - priceA;
                });
            }
            renderProducts(sortedProducts);
        });
    </script>
</body>
</html>
